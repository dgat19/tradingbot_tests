{"version":3,"file":"scope-to-main.js","sources":["../../../src/renderer/integrations/scope-to-main.ts"],"sourcesContent":["import { defineIntegration } from '@sentry/core';\nimport { normalize } from '@sentry/utils';\n\nimport { addScopeListener } from '../../common/scope';\nimport { getIPC } from '../ipc';\n\n/**\n * Passes scope changes to the main process.\n */\nexport const scopeToMainIntegration = defineIntegration(() => {\n  return {\n    name: 'ScopeToMain',\n    setup() {\n      const ipc = getIPC();\n\n      addScopeListener((merged, changed) => {\n        ipc.sendScope(JSON.stringify(normalize(merged, 20, 2_000)));\n        changed.clearBreadcrumbs();\n        changed.clearAttachments();\n      });\n    },\n  };\n});\n"],"names":[],"mappings":";;;;;AAMA;;AAEG;AACU,MAAA,sBAAsB,GAAG,iBAAiB,CAAC,MAAK;IAC3D,OAAO;AACL,QAAA,IAAI,EAAE,aAAa;QACnB,KAAK,GAAA;AACH,YAAA,MAAM,GAAG,GAAG,MAAM,EAAE;AAEpB,YAAA,gBAAgB,CAAC,CAAC,MAAM,EAAE,OAAO,KAAI;AACnC,gBAAA,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,IAAK,CAAC,CAAC,CAAC;gBAC3D,OAAO,CAAC,gBAAgB,EAAE;gBAC1B,OAAO,CAAC,gBAAgB,EAAE;AAC5B,aAAC,CAAC;SACH;KACF;AACH,CAAC;;;;"}