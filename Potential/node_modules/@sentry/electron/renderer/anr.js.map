{"version":3,"file":"anr.js","sources":["../src/src/renderer/anr.ts"],"sourcesContent":["/* eslint-disable no-restricted-globals */\nimport { RendererProcessAnrOptions } from '../common/ipc';\nimport { getIPC } from './ipc';\n\n/**\n * Enables the sending of ANR messages to the main process.\n */\nexport function enableAnrRendererMessages(options: Partial<RendererProcessAnrOptions>): void {\n  const config: RendererProcessAnrOptions = {\n    pollInterval: 1_000,\n    anrThreshold: 5_000,\n    captureStackTrace: false,\n    ...options,\n  };\n\n  const ipc = getIPC();\n\n  document.addEventListener('visibilitychange', () => {\n    ipc.sendStatus({ status: document.visibilityState, config });\n  });\n\n  ipc.sendStatus({ status: document.visibilityState, config });\n\n  setInterval(() => {\n    ipc.sendStatus({ status: 'alive', config });\n  }, config.pollInterval);\n}\n"],"names":["ipc","getIPC"],"mappings":";;AAIA;;AAEG;AACG,SAAU,yBAAyB,CAAC,OAA2C,EAAA;AACnF,IAAA,MAAM,MAAM,GAA8B;AACxC,QAAA,YAAY,EAAE,IAAK;AACnB,QAAA,YAAY,EAAE,IAAK;AACnB,QAAA,iBAAiB,EAAE,KAAK;AACxB,QAAA,GAAG,OAAO;KACX;AAED,IAAA,MAAMA,KAAG,GAAGC,UAAM,EAAE;AAEpB,IAAA,QAAQ,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,MAAK;AACjD,QAAAD,KAAG,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,QAAQ,CAAC,eAAe,EAAE,MAAM,EAAE,CAAC;AAC9D,KAAC,CAAC;AAEF,IAAAA,KAAG,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,QAAQ,CAAC,eAAe,EAAE,MAAM,EAAE,CAAC;IAE5D,WAAW,CAAC,MAAK;QACfA,KAAG,CAAC,UAAU,CAAC,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC;AAC7C,KAAC,EAAE,MAAM,CAAC,YAAY,CAAC;AACzB;;;;"}